(this["webpackJsonpmms-github-issue-explorer"]=this["webpackJsonpmms-github-issue-explorer"]||[]).push([[0],{118:function(e){e.exports=JSON.parse('{"a":{"type":"git","url":"https://github.com/krasiyan/mms-github-issue-explorer"}}')},169:function(e,t,a){e.exports=a(222)},174:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),i=a(17),l=a.n(i),s=a(37),c=a(18),u=a(268),m=(a(174),a(246)),p=a(248),g=a(249),d=a(250),h=a(251),b=a(252),f=a(62),E=a(253),y=a(254),v=Object(m.a)((function(e){return Object(p.a)({appBar:{color:"#fff",marginBottom:e.spacing(3)},title:{"text-transform":"none"}})})),O=function(){var e=v();return o.a.createElement(g.a,{position:"static",className:e.appBar},o.a.createElement(d.a,null,o.a.createElement(h.a,{justify:"space-between",alignItems:"center",container:!0},o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{"aria-label":"home",component:s.b,to:"/",color:"inherit",startIcon:o.a.createElement(E.a,{fontSize:"small"})},o.a.createElement(f.a,{variant:"h6",className:e.title},"MMS GitHub Issue Explorer"))),o.a.createElement(h.a,{item:!0},o.a.createElement(b.a,{component:s.b,to:"/settings",endIcon:o.a.createElement(y.a,null),color:"inherit"},"Settings")))))},N=a(43),C=a(273),S=a(269),j=a(255),k=new RegExp("^https?://github.com/(?<owner>.+?)/(?<name>.+?)(?:/|$)"),I=function(e,t){var a=localStorage.getItem(e);return a?JSON.parse(a):t},w=Object(m.a)((function(e){return Object(p.a)({field:{marginTop:e.spacing(3),marginLeft:e.spacing(2),marginRight:e.spacing(2),width:"100%"}})})),x=function(e){var t=e.fieldName,a=e.fieldDefaultValue,r=e.fieldRegex,n=e.id,i=e.label,l=e.placeholder,s=e.helperText,c=e.helperTextError,u=w(),m=function(e,t){var a=I(e,t),r=o.a.useState(a),n=Object(N.a)(r,2),i=n[0],l=n[1];return o.a.useEffect((function(){return localStorage.setItem(e,JSON.stringify(i))}),[i]),[i,l]}(t,a),p=Object(N.a)(m,2),g=p[0],d=p[1],h=function(){return r.test(g)},b=o.a.useState(!1),f=Object(N.a)(b,2),E=f[0],y=f[1];return o.a.createElement(C.a,{error:E&&!h(),className:u.field},o.a.createElement(S.a,{id:n,required:!0,error:E&&!h(),value:g,onChange:function(e){var t=e.target.value;return d(t)},onFocus:function(){return y(!0)},label:i,placeholder:l,helperText:E&&!h()&&c||s,InputLabelProps:{shrink:!0},inputProps:{spellCheck:"false"}}))},R=function(){return o.a.createElement("form",{noValidate:!0,autoComplete:"off"},o.a.createElement(h.a,{container:!0,item:!0,md:10,wrap:"wrap",justify:"space-between",alignItems:"flex-end"},o.a.createElement(x,{fieldName:"githubRepository",fieldDefaultValue:"https://github.com/facebook/react",fieldRegex:k,id:"githubRepository",label:"GitHub repository",placeholder:"https://github.com/facebook/react",helperText:o.a.createElement("span",null,"Enter the full GitHub repository URL"),helperTextError:o.a.createElement("span",null,"Invalid GitHub repository - use the following format:",o.a.createElement("br",null),o.a.createElement("strong",null,"https://github.com/facebook/react"))}),o.a.createElement(x,{fieldName:"githubToken",fieldDefaultValue:"",fieldRegex:new RegExp("(.+)"),id:"githubToken",label:"GitHub personal access token",placeholder:"token",helperText:o.a.createElement("span",null,"Create a personal access token on GitHub with the public_repo scope -"," ",o.a.createElement(j.a,{href:"https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token",target:"_blank",rel:"noopener",color:"primary"},"official guide"))})))},T=a(67),L=a(26),H=a(266),F=a(271),M=a(265),P=a(155),$=a.n(P),G=a(272),A=a(256),q=a(270),U=a(105),B=a(104),z=Object(m.a)((function(e){return Object(p.a)({root:{margin:"0 auto","text-align":"right"},issueStateFilter:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},radioGreen:{color:U.a[400]},radioRed:{color:B.a[400]}})}));!function(e){e.open="open",e.closed="closed",e.both="both"}(r||(r={}));var _=function(e){var t=e.issueStateFilter,a=e.setIssueStateFilter,r=e.issueTextFilter,n=e.setIssueTextFilter,i=z(),l=o.a.useState(""),s=Object(N.a)(l,2),c=s[0],u=s[1];return o.a.createElement("div",{className:i.root},o.a.createElement($.a,{cancelOnEscape:!0,value:r,onChange:function(e){return u(e)},onRequestSearch:function(){return n(c)},onCancelSearch:function(){console.log("cancel"),n(""),u("")}}),o.a.createElement(C.a,{component:"fieldset",className:i.issueStateFilter},o.a.createElement(G.a,{row:!0,"aria-label":"issueStateFilter",name:"issueStateFilter",value:t,onChange:function(e){var t=e.target.value;return a(t)}},o.a.createElement(A.a,{value:"open",control:o.a.createElement(q.a,{color:"default",className:i.radioGreen}),label:"Open"}),o.a.createElement(A.a,{value:"closed",control:o.a.createElement(q.a,{color:"default",className:i.radioRed}),label:"Closed"}),o.a.createElement(A.a,{value:"both",control:o.a.createElement(q.a,{color:"default"}),label:"Both"}))))},Q=a(257),J=a(258),D=a(259),V=a(260),W=a(261),K=a(262),X=Object(m.a)((function(e){return Object(p.a)({root:{minWidth:275,margin:"0px auto ".concat(e.spacing(2),"px auto")},cardContent:{paddingLeft:0,paddingRight:0,"&:last-child":{paddingBottom:e.spacing(2)}},subTitle:{fontSize:12},issueOpenIcon:{color:U.a[400]},issueClosedIcon:{color:B.a[600]}})})),Y=function(e){var t=e.number,a=e.title,r=e.state,n=e.createdAt,i=e.authorLogin,l=e.totalCommentCount,c=X();return o.a.createElement(Q.a,{className:c.root,variant:"outlined"},o.a.createElement(J.a,{component:s.b,to:"/".concat(t)},o.a.createElement(D.a,{className:c.cardContent},o.a.createElement(h.a,{container:!0,justify:"space-between",alignItems:"stretch"},o.a.createElement(h.a,{item:!0,xs:2,md:1,container:!0,alignItems:"center",justify:"center"},"OPEN"===r?o.a.createElement(V.a,{className:c.issueOpenIcon}):o.a.createElement(W.a,{className:c.issueClosedIcon})),o.a.createElement(h.a,{item:!0,xs:8,md:10,container:!0,justify:"space-around",alignItems:"flex-start",direction:"column"},o.a.createElement(f.a,{variant:"h6",component:"h2"},a),o.a.createElement(f.a,{className:c.subTitle,color:"textSecondary"},"#",t," opened on ",n," by ",i)),o.a.createElement(h.a,{item:!0,xs:2,md:1,container:!0,direction:"column",justify:"center",alignItems:"center"},o.a.createElement(K.a,null),o.a.createElement(f.a,{variant:"body2"},l))))))},Z=a(263),ee=a(264),te=Object(m.a)((function(){return Object(p.a)({root:{"text-align":"center"}})})),ae=function(e){var t=e.loadMore,a=te();return o.a.createElement("div",{className:a.root},o.a.createElement(Z.a,{size:"medium",color:"primary",variant:"extended",onClick:function(){return t()}},o.a.createElement(ee.a,null),"Load more"))},re=a(118),ne=function(e){var t=e.details;return o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement(f.a,{variant:"subtitle2"},"Error details:"),o.a.createElement(f.a,{variant:"overline"},t))},oe=function(){return o.a.createElement(F.a,{severity:"warning"},o.a.createElement(M.a,null,"Missing GitHub access token"),"Please provide a GitHub personal access token in the"," ",o.a.createElement(s.b,{to:"/settings"},"settings page"),".")},ie=function(){return o.a.createElement(F.a,{severity:"error"},o.a.createElement(M.a,null,"Invalid GitHub access token"),"Please make sure you have the correct GitHub personal access token it in the"," ",o.a.createElement(s.b,{to:"/settings"},"settings")," and that it has the required scopes (i.e public_repo).")},le=function(e){var t=e.details;return o.a.createElement(F.a,{severity:"error"},o.a.createElement(M.a,null,"GraphQL error"),"A GraphQL error has occured - please make sure that the schema is up to date and that the"," ",o.a.createElement(j.a,{href:"".concat(re.a.url,"/actions"),target:"_blank",rel:"noopener",color:"primary"},"project's CI pipeline")," ","is passing.",o.a.createElement(ne,{details:t}))},se=function(e){var t=e.details;return o.a.createElement(F.a,{severity:"error"},o.a.createElement(M.a,null,"An unknown error has occured"),"Please try again or open an issue in the"," ",o.a.createElement(j.a,{href:re.a.url,target:"_blank",rel:"noopener",color:"primary"},"project's repository"),o.a.createElement(ne,{details:t}))},ce=function(){return o.a.createElement(F.a,{severity:"error"},o.a.createElement(M.a,null,"Invalid GitHub repository"),"Please set a valid repository URL in the"," ",o.a.createElement(s.b,{to:"/settings"},"settings"))},ue=function(e){var t,a=e.error;if(a.graphQLErrors.length>0)return o.a.createElement(le,{details:a.message});if(a.networkError&&"statusCode"in a.networkError&&401===a.networkError.statusCode)return"result"in a.networkError&&"Bad credentials"===(null===(t=a.networkError.result)||void 0===t?void 0:t.message)?o.a.createElement(ie,null):o.a.createElement(oe,null);return o.a.createElement(se,{details:a.message})};function me(){var e=Object(T.a)(["\n  query SearchIssues($query: String!, $after: String) {\n    search(type: ISSUE, query: $query, last: 10, after: $after) {\n      edges {\n        node {\n          ... on Issue {\n            author {\n              login\n            }\n            comments {\n              totalCount\n            }\n            id\n            number\n            state\n            title\n            createdAt\n          }\n        }\n      }\n      pageInfo {\n        startCursor\n        hasPreviousPage\n        hasNextPage\n        endCursor\n      }\n    }\n  }\n"]);return me=function(){return e},e}var pe=Object(L.gql)(me()),ge=function(e){var t=e.githubRepositoryOwner,a=e.githubRepositoryName,n=e.issueStateFilter,i=e.issueTextFilter,l=["repo:".concat(t,"/").concat(a),"is:issue","sort:created",i];n===r.open?l.push("is:open"):n===r.closed&&l.push("is:closed");var s=Object(L.useQuery)(pe,{variables:{query:l.join(" ")}}),c=s.loading,u=s.error,m=s.data,p=s.fetchMore;if(c)return o.a.createElement(H.a,null);if(u)return o.a.createElement(ue,{error:u});if(!m||0===m.search.edges.length)return o.a.createElement(F.a,{severity:"info"},o.a.createElement(M.a,null,"No issues found"));return o.a.createElement(o.a.Fragment,null,m.search.edges.map((function(e){var t=e.node,a=t.id,r=t.number,n=t.title,i=t.state,l=t.createdAt,s=t.author.login,c=t.comments.totalCount;return o.a.createElement(Y,Object.assign({number:r,title:n,state:i,createdAt:l,authorLogin:s,totalCommentCount:c},{key:a}))})),m.search.pageInfo.hasNextPage&&o.a.createElement(ae,{loadMore:function(){p({variables:{after:m.search.pageInfo.endCursor}})}}))},de=function(e){var t=e.githubConfig,a=o.a.useState(r.both),n=Object(N.a)(a,2),i=n[0],l=n[1],s=o.a.useState(""),c=Object(N.a)(s,2),u=c[0],m=c[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(_,{issueStateFilter:i,setIssueStateFilter:l,issueTextFilter:u,setIssueTextFilter:m}),o.a.createElement(ge,{githubRepositoryName:t.repositoryName,githubRepositoryOwner:t.repositoryOwner,issueStateFilter:i,issueTextFilter:u}))},he=a(267),be=a(274),fe=a(131),Ee=a(275),ye=a(158),ve=a.n(ye),Oe=a(159),Ne=a.n(Oe),Ce=(a(221),function(e){var t=e.bodyHTML;return o.a.createElement("div",{className:"markdown-body"},ve()(Ne.a.sanitize(t)))}),Se=Object(m.a)((function(e){return Object(p.a)({root:{marginLeft:e.spacing(3),marginBottom:e.spacing(1)},header:{"& > .MuiCardHeader-avatar":{marginRight:e.spacing(1)}},avatar:{width:e.spacing(3),height:e.spacing(3)}})})),je=function(e){var t=e.createdAt,a=e.authorLogin,r=e.authorUrl,n=e.authorAvatarUrl,i=e.bodyHTML,l=Se();return o.a.createElement(Q.a,{className:l.root,variant:"outlined"},o.a.createElement(he.a,{avatar:o.a.createElement(be.a,{alt:a,src:n,className:l.avatar},a.substr(0,1)),titleTypographyProps:{variant:"h5"},subheader:o.a.createElement("span",null,o.a.createElement(j.a,{href:r,target:"_blank",rel:"noopener"},a)," ","on ",t),className:l.header}),o.a.createElement(D.a,null,o.a.createElement(Ce,{bodyHTML:i})))};function ke(){var e=Object(T.a)(["\n  query GetIssueComments(\n    $githubRepositoryName: String!\n    $githubRepositoryOwner: String!\n    $issueNumber: Int!\n    $after: String\n  ) {\n    repository(name: $githubRepositoryName, owner: $githubRepositoryOwner) {\n      issue(number: $issueNumber) {\n        id\n        comments(first: 10, after: $after) {\n          edges {\n            node {\n              id\n              createdAt\n              author {\n                login\n                avatarUrl\n                url\n              }\n              bodyHTML\n            }\n          }\n          pageInfo {\n            startCursor\n            hasPreviousPage\n            hasNextPage\n            endCursor\n          }\n        }\n      }\n    }\n  }\n"]);return ke=function(){return e},e}var Ie=Object(L.gql)(ke()),we=function(e){var t=e.githubConfig,a=e.issueNumber,r=Object(L.useQuery)(Ie,{variables:{githubRepositoryName:t.repositoryName,githubRepositoryOwner:t.repositoryOwner,issueNumber:a}}),n=r.loading,i=r.error,l=r.data,s=r.fetchMore;if(n)return o.a.createElement(H.a,null);if(i)return o.a.createElement(ue,{error:i});if(!l||0===l.repository.issue.comments.edges.length)return o.a.createElement(F.a,{severity:"info"},o.a.createElement(M.a,null,"No comments yets"));return o.a.createElement(o.a.Fragment,null,l.repository.issue.comments.edges.map((function(e){var t=e.node,a=t.author,r=a.login,n=a.url,i=a.avatarUrl,l=t.bodyHTML,s=t.createdAt,c=t.id;return o.a.createElement(je,Object.assign({createdAt:s,authorLogin:r,authorUrl:n,authorAvatarUrl:i,bodyHTML:l},{key:c}))})),l.repository.issue.comments.pageInfo.hasNextPage&&o.a.createElement(ae,{loadMore:function(){s({variables:{after:l.repository.issue.comments.pageInfo.endCursor}})}}))};function xe(){var e=Object(T.a)(["\n  query GetIssue(\n    $githubRepositoryName: String!\n    $githubRepositoryOwner: String!\n    $issueNumber: Int!\n  ) {\n    repository(name: $githubRepositoryName, owner: $githubRepositoryOwner) {\n      issue(number: $issueNumber) {\n        id\n        number\n        state\n        title\n        url\n        author {\n          avatarUrl(size: 40)\n          login\n          url\n        }\n        bodyHTML\n        createdAt\n      }\n    }\n  }\n"]);return xe=function(){return e},e}var Re=Object(L.gql)(xe()),Te=Object(m.a)((function(e){return Object(p.a)({root:{paddingBottom:e.spacing(5)},firstComment:{marginBottom:e.spacing(1)},issueStatusChip:{color:"white",marginLeft:e.spacing(1)},issueStatusChipOpen:{backgroundColor:U.a[400]},issueStatusChipClosed:{backgroundColor:B.a[600]},issueStatusIcon:{color:"white"}})})),Le=function(e){var t=e.githubConfig,a=Te(),r=Object(c.f)().issueNumber,n=parseInt(r,10),i=Object(L.useQuery)(Re,{variables:{githubRepositoryOwner:t.repositoryOwner,githubRepositoryName:t.repositoryName,issueNumber:n}}),l=i.loading,s=i.error,u=i.data;if(l)return o.a.createElement(H.a,null);if(s)return o.a.createElement(ue,{error:s});if(!u||!u.repository.issue)return o.a.createElement(F.a,{severity:"warning"},o.a.createElement(M.a,null,"Issue not found"));var m=u.repository.issue;return o.a.createElement("div",{className:a.root},o.a.createElement(Q.a,{variant:"outlined",className:a.firstComment},o.a.createElement(he.a,{avatar:o.a.createElement(be.a,{alt:m.author.login,src:m.author.avatarUrl},m.author.login.substr(0,1)),action:o.a.createElement(fe.a,{"aria-label":"settings",component:j.a,href:m.url,target:"_blank",rel:"noopener",color:"primary"},o.a.createElement(h.a,{container:!0,direction:"column",alignItems:"center"},o.a.createElement(E.a,null),o.a.createElement(f.a,{variant:"body2"},"#",m.number))),title:m.title,titleTypographyProps:{variant:"h5"},subheader:o.a.createElement(h.a,{container:!0,alignItems:"center"},o.a.createElement(f.a,{display:"inline"},"by"," ",o.a.createElement(j.a,{href:m.author.url,target:"_blank",rel:"noopener"},m.author.login)," ","on ",m.createdAt),"OPEN"===m.state?o.a.createElement(Ee.a,{label:"Open",size:"small",icon:o.a.createElement(V.a,{className:a.issueStatusIcon}),className:"".concat(a.issueStatusChip," ").concat(a.issueStatusChipOpen)}):o.a.createElement(Ee.a,{label:"Closed",size:"small",icon:o.a.createElement(W.a,{className:a.issueStatusIcon}),className:"".concat(a.issueStatusChip," ").concat(a.issueStatusChipClosed)}))}),o.a.createElement(D.a,null,o.a.createElement(Ce,{bodyHTML:m.bodyHTML}))),o.a.createElement(we,{githubConfig:t,issueNumber:n}))},He=function(e){var t=e.githubConfig,a=e.children;return t.repositoryOwner&&t.repositoryName?t.token?o.a.createElement(o.a.Fragment,null,a):o.a.createElement(oe,null):o.a.createElement(ce,null)},Fe=function(){var e,t,a=I("githubRepository","https://github.com/facebook/react"),r=a.match(k),n={token:I("githubToken",void 0),repositoryUrl:a,repositoryOwner:null===r||void 0===r||null===(e=r.groups)||void 0===e?void 0:e.owner,repositoryName:null===r||void 0===r||null===(t=r.groups)||void 0===t?void 0:t.name};return o.a.createElement(s.a,{basename:"/mms-github-issue-explorer"},o.a.createElement(O,null),o.a.createElement(u.a,{maxWidth:"md"},o.a.createElement(c.c,null,o.a.createElement(c.a,{path:"/settings"},o.a.createElement(R,null)),o.a.createElement(c.a,{path:"/:issueNumber"},o.a.createElement(He,{githubConfig:n},o.a.createElement(Le,{githubConfig:n}))),o.a.createElement(c.a,{path:"/"},o.a.createElement(He,{githubConfig:n},o.a.createElement(de,{githubConfig:n}))))))},Me=a(119),Pe=a(160),$e=a(3),Ge=function(){var e=Object(L.createHttpLink)({uri:"https://api.github.com/graphql"}),t=Object(Pe.a)((function(e,t){var a=t.headers,r=I("githubToken","");return{headers:Object(Me.a)(Object(Me.a)({},a),{},{authorization:r?"bearer ".concat(r):""})}}));return new L.ApolloClient({link:t.concat(e),cache:new L.InMemoryCache({typePolicies:{User:{keyFields:["login"]},Repository:{keyFields:[["id"]]},Issue:{fields:{comments:Object($e.H)([["issueNumber"]])}},Query:{fields:{search:Object($e.H)(["query"])}}}}),connectToDevTools:!0})}();l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L.ApolloProvider,{client:Ge},o.a.createElement(Fe,null))),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.33e5e2d6.chunk.js.map